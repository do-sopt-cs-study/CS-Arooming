# π“‘ TLS/SSL ν”„λ΅ν† μ½μ μ—­ν• κ³Ό handshake: μ•”νΈν™”λ ν†µμ‹  μ„¤μ • κ³Όμ •

## π’»Β TLS (Transport Layer Security)

- μ „μ†΅ κ³„μΈµ λ³΄μ•μΌλ΅, μΈν„°λ„· μƒμ μ»¤λ®¤λ‹μΌ€μ΄μ…μ„ μ„ν• κ°μΈ μ •λ³΄μ™€ λ°μ΄ν„° λ³΄μ•μ„ μ©μ΄ν•κ² ν•κΈ° μ„ν•΄ μ„¤κ³„λ λ³΄μ• ν”„λ΅ν† μ½
- λ„¤νΈμ›ν¬ μƒμ—μ„ λ³΄μ•μ„ μ κ³µν•λ” μ•”νΈν™” ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•΄ λ„¤νΈμ›ν¬μ— λ³΄μ•μ„ μ κ³µν•¨μΌλ΅μ¨, κ°μΈμ •λ³΄ λ³΄νΈλ¥Ό λ³΄μ¥ν•λ” ν΄λΌμ΄μ–ΈνΈ/ μ„λ²„ ν”„λ΅ν† μ½
- μ „μ†΅ μ¤‘μΈ μ •λ³΄λ¥Ό λ³΄νΈν•¨μΌλ΅μ¨ μ•μ „ν•μ§€ μ•μ€ μΈν”„λΌλ¥Ό ν†µν•΄ ν†µμ‹ μ„ λ³΄νΈν•¨.
    - μ›Ή μ‚¬μ΄νΈλ¥Ό λ΅λ“ν•λ” μ›Ή λΈλΌμ°μ €μ™€ κ°™μ΄ μ›Ή μ‘μ© ν”„λ΅κ·Έλ¨κ³Ό μ„λ²„ κ°„μ μ»¤λ®¤λ‹μΌ€μ΄μ…μ„ μ•”νΈν™”μ— μ‚¬μ©λ¨.
    - μ΄λ©”μΌ, λ©”μ‹μ§€, λ³΄μ΄μ¤μ¤λ²„ IP(VoIP) λ“± λ‹¤λ¥Έ μ»¤λ®¤λ‹μΌ€μ΄μ…μ„ μ•”νΈν™”ν•κΈ° μ„ν•΄ μ‚¬μ©
- TLS λ²„μ „ 1.3μ€ μµκ·Όμ— ν™λ°ν μ‚¬μ©λλ” μ•”νΈν™” ν”„λ΅ν† μ½ λ²„μ „μΌλ΅, μ΄μ λ” μ‚¬μ©ν•μ§€ μ•λ” SSL λ²„μ „ 3.0 ν”„λ΅ν† μ½λ³΄λ‹¤ ν–¥μƒλ λ³΄μ• κΈ°λ¥κ³Ό μ„±λ¥μ„ λ‹¤μ μ κ³µν•¨.

<br />

### πΒ TLS ν”„λ΅ν† μ½ μ—­ν• 

- TLS ν”„λ΅ν† μ½μ€ μ£Όλ΅ μ•”νΈν™”, μΈμ¦, λ¬΄κ²°μ„±μ΄λΌλ” μ„Έ κ°€μ§€ μ—­ν• μ„ μν–‰ν•¨.
    - `μ•”νΈν™”`: μ  3μλ΅λ¶€ν„° μ „μ†΅λλ” λ°μ΄ν„°λ¥Ό μ¨κΉ€.
    - `μΈμ¦`: μ •λ³΄λ¥Ό κµν™ν•λ” λ‹Ήμ‚¬μκ°€ μ”μ²­λ λ‹Ήμ‚¬μμ„μ„ λ³΄μ¥ν•¨.
    - `λ¬΄κ²°μ„±`: λ°μ΄ν„°κ°€ μ„μ΅°λκ±°λ‚ λ³€μ΅°λμ§€ μ•μ•λ”μ§€ ν™•μΈν•¨.
- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ TLSλ΅ ν†µμ‹ μ„ ν•  λ•, μ–΄λ– ν• μ  3μλ„ λ©”μ‹μ§€λ¥Ό λ³€ν•ν•κ±°λ‚ κ°μ²­ν•  μ μ—†λ„λ΅ ν•¨.

---

<br />

## π’»Β SSL (Secure Sockets Layer)

- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„  κ°„μ μ•μ „ν• λ§ν¬λ¥Ό ν†µν•΄ μ†΅μμ‹ λλ” λ¨λ“  λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² λ³΄μ¥ν•λ” κ³Όκ±°μ λ³΄μ• ν‘μ¤€ κΈ°μ μ΄μ—μ.
- λ³΄μ• μ·¨μ•½μ μΌλ΅ μΈν•΄ ν„μ¬λ” μ‚¬μ©ν•μ§€ μ•λ” μ•”νΈν™” ν”„λ΅ν† μ½

<br />

### πΒ SSL ν”„λ΅ν† μ½ μ—­ν• 

- SSLμ΄ μ μ©λμ§€ μ•μ€ ν†µμ‹ μ κ²½μ°, ν‰λ¬Έ(plain-text)μ΄ κ·Έλ€λ΅ μ „μ†΅λ¨.
    - λ§μ•½ μ  3μκ°€ ν†µμ‹  ν¨ν‚·μ„ νƒμ·¨ν•  κ²½μ°, κ·Έ λ‚΄μ©μ„ μ‰½κ² ν™•μΈν•  μ μμ.
- SSLμ„ μ μ©ν•λ‹¤λ©΄ μ”μ²­μ„ μ•”νΈν™”ν•΄μ„ λ³΄λ‚΄κΈ° λ•λ¬Έμ—, ν†µμ‹  ν¨ν‚·μ΄ νƒμ·¨λμ–΄λ„ λ³µνΈν™” ν‚¤κ°€ μ—†μΌλ©΄ μ›λ λ‚΄μ©μ„ μ• μ μ—†κ²λμ–΄ ν‰λ¬Έμ΄ λ…Έμ¶λλ” λ¬Έμ λ¥Ό κΈ°μ μ μΌλ΅ ν•΄κ²° κ°€λ¥ν•¨.

---

<br />

## π’»Β ****TLS/SSL HandShake****

> handshake: ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ”μ²­/ μ‘λ‹µμ„ λ°λ³µν•λ©° ν†µμ‹ μ— ν•„μ”ν• μ‚¬μ „ μ‘μ—…μ„ ν•λ”κ² λ§μΉ μ•…μ κ°™μ•„ μ΄λ¬ν• μ©μ–΄κ°€ λ¶™μ—¬μ΅λ‹¤κ³  ν•λ‹¤.
> 

> HTTPSμ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ ν†µμ‹  μ „, SSL μΈμ¦μ„λ΅ μ‹ λΆ°μ„± μ—¬λ¶€λ¥Ό νλ‹¨ν•κΈ° μ„ν•΄ μ—°κ²°ν•λ” λ°©μ‹
> 

1. **`ClientHello μ”μ²­`**
    - ν΄λΌμ΄μ–ΈνΈκ°€ νΉμ • μ£Όμ†μ— μ ‘κ·Όν•λ©΄, ν•΄λ‹Ήν•λ” μ„λ²„μ— μ”μ²­μ„ λ³΄λƒ„.
        - ex. NAVERμ— μ ‘κ·Ό μ‹, λ„¤μ΄λ²„ μ„λ²„μ— μ”μ²­ μ „μ†΅
    - ν΄λΌμ΄μ–ΈνΈμ μ£Όμ” μ •λ³΄λ¥Ό μ„λ²„μ— μ „μ†΅.
        - λ‚μ λ°μ΄ν„°
        - μ•”νΈν™” ν”„λ΅ν† μ½ μ •λ³΄
        - ν΄λΌμ΄μ–ΈνΈκ°€ μ‚¬μ© κ°€λ¥ν• μ•”νΈν™” κΈ°λ²•
        - μ„Έμ… ID
        - κΈ°νƒ€ ν™•μ¥ μ •λ³΄
    - ν•΄λ‹Ή ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹λ³„, μ–΄λ–¤ μ•”νΈν™”λ¥Ό μ‚¬μ©ν•  μ μλ”μ§€ λ“±μ μ •λ³΄λ¥Ό μ„λ²„κ°€ μΈμ§€ν•λ„λ΅ ν•¨.

2. **`ServerHello μ‘λ‹µ`**
    - μ„λ²„κ°€ ClientHello μ”μ²­μ„ λ°›μΌλ©΄, μ•„λμ μ •λ³΄λ¥Ό λ‹΄μ•„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ‘λ‹µμ„ λ³΄λƒ„.
        - λ‚μ λ°μ΄ν„°(ClientHelloμ λ‚μ λ°μ΄ν„°μ™€ λ‹¤λ¦„)
        - μ„λ²„κ°€ μ‚¬μ©ν•  μ•”νΈν™” κΈ°λ²•
        - μΈμ¦μ„
            - CA, λ„λ©”μΈ, κ³µκ° ν‚¤
    - ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ© κ°€λ¥ν• μ•”νΈν™” κΈ°λ²• μ¤‘ μ„λ²„μ—μ„ ν™μ©ν•  μ•”νΈν™” κΈ°λ²•μ„ μ „λ‹¬ν•μ—¬ λ™μΌν• μ•”νΈν™” κΈ°λ²•μΌλ΅ μ†΅μμ‹ ν•  μ μλ„λ΅ μ„ μ–Έ.
    - μΈμ¦μ„ μ •λ³΄μ™€ ν•¨κ», μ„λ²„μ™€μ μ•”νΈν™” ν†µμ‹ μ„ μ„ν• μ„λ²„ κ³µκ°ν‚¤κ°€ μ „λ‹¬λ¨.
    - μ„λ²„μ κ³µκ°ν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™” β†’ μ„λ²„λ” κ°μΈ ν‚¤λ΅ λ³µνΈν™” β†’ μ”μ²­ λ¶„μ„

3. **`μΈμ¦μ„ κ²€ν† `**
    - μ„λ²„κ°€ μ „λ‹¬ν• μΈμ¦μ„κ°€ μ‹¤μ  ν•΄λ‹Ή μ„λ²„μ μΈμ¦μ„μΈμ§€, μ‹ λΆ°ν•  μ μλ” CAμ—μ„ λ°κΈ‰λ κ²ƒμΈμ§€, μ‹¤μ  ν•΄λ‹Ή CAμ—μ„ λ°κΈ‰λ°›μ•λ”μ§€ λ“± μΈμ¦μ„ κ²€ν† 
        - μΈμ¦μ„μ— μ΄μƒμ΄ μ—†λ‹¤λ©΄, `μ—°κ²°μ΄ μ•μ „`ν•λ‹¤λ” μ°½μ„ λ³Ό μ μμ.
        - μΈμ¦μ„μ— λ¬Έμ κ°€ μλ‹¤λ©΄, `λΉ„κ³µκ° μ—°κ²°μ΄ μ•„λ‹™λ‹λ‹¤.` μ™€ κ°™μ€ κ²½κ³ λ¬Έμ„ λ³Ό μ μμ.
            - μ΄λ” λΈλΌμ°μ €κ°€ μ‚¬μ©μμ—κ² λ³΄λ‚΄λ” κ²½κ³ λ¬ΈμΌλ΅, ν•΄λ‹Ή μ‚¬μ΄νΈμ μΈμ¦μ„κ°€ μ¬λ°”λ¥΄μ§€ μ•μμ„ μλ―Έ.

4. **`Premaster Secret μ†΅μμ‹ `**
    - ClientHello, ServerHelloμ—μ„ μ†΅μμ‹ ν• λ‚μ λ°μ΄ν„°λ¥Ό μ΅°ν•©ν•μ—¬ Premaster Secret μƒμ„±.
    - Premaster Secretμ„ ServerHelloμ—μ„ μ „λ‹¬λ°›μ•λ κ³µκ° ν‚¤λ΅ μ•”νΈν™”.
    - ν•΄λ‹Ή λ°μ΄ν„°λ” μ„λ²„κ°€ κ°€μ§„ κ°μΈ ν‚¤λ΅λ§ λ³µνΈν™” κ°€λ¥ β†’ λ°μ΄ν„° νƒμ·¨ μ‹μ—λ„ λ‚΄μ© λ³΄νΈ κ°€λ¥.
    - μ„λ²„: μμ‹ λ λ°μ΄ν„° λ³µνΈν™” β†’ ν΄λΌμ΄μ–ΈνΈμ™€ λ™μΌν• Premaster Secret μ €μ¥ κ°€λ¥.

5. **`ν†µμ‹  ν‚¤ μƒμ„±`**
    - λ³΄μ ν• Premaster Secretμ„ κΈ°λ°μΌλ΅ Master Secret, Session Key μƒμ„±.
    - μ΄λ¥Ό ν†µν•΄, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ™μΌν• ν‚¤λ¥Ό λ³΄μ ν•κ²λ¨.
    - ν΄-μ„ μ•”νΈν™” ν†µμ‹  κ°€λ¥.
    
6. **`λ°μ΄ν„° μ†΅μμ‹ `**
    - μ €μ¥λ Session Keyλ¥Ό ν†µν• λ€μΉ­ ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ μ•”/λ³µνΈν™”ν•μ—¬ ν†µμ‹ .

7. **`μ„Έμ… μΆ…λ£`**
    - ν΄λΌμ΄μ–ΈνΈμ™€μ μ—°κ²°μ΄ λλ‚¬μ„ κ²½μ°, Session Key νκΈ°.