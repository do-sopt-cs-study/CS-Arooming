# 📑 IPC(Inter Process Communication): 프로세스 간 통신 방법

## ✅ IPC(Inter Process Communication)

- `프로세스들 사이에 서로 데이터를 주고 받는 행위`
- 프로세스 → 독립적으로 실행됨.
    - 모든 프로세스는 **유저 영역**에서 OS로부터 할당받은 독립 공간에서 운행됨.
        - 유저영역(user-space): 프로그램이 동작하기 위해 사용되는 메모리 공간
    - 독립적인 공간에서 운행 → 프로세스 간 통신이 어렵더라!
    - **커널 영역**에서 IPC라는 프로세스 간의 통신을 제공하게 됨.
        - 커널 영역(kernel-space): 유저 영역을 제외한 나머지 영역
    - 즉, 프로세스는 커널이 제공하는 IPC 기술을 통해 통신을 할 수 있게 됨!

<br />

## ✅ IPC의 종류

### 1️⃣ PIPE (익명 PIPE, Anonymous PIPE)

- 통신을 위한 메모리 공간(버퍼) 생성 → 프로세스가 데이터를 주고 받게 함.
- 두 개의 프로세스 연결
    - A 프로세스: 데이터 쓰기 담당 `write()`
    - B 프로세스: 데이터 읽기 담당 `read()`
- 부모, 자식 간의 `단방향 통신`으로 자주 사용
    - 한 쪽 방향으로만 통신이 가능한 PIPE의 특징때문에, `Half-Duplex(반이중) 통신`이라고도 불림.
- 단방향 방향 통신 + 하나의 프로세스는 하나의 역할만을 담당하기 때문에, 읽기와 쓰기(송신과 수신)를 모두 하는 경우에는 두 개의 파이프를 만들어야 함!
- read(), write() → block mode로 작동 → read 대기 중이라면 read가 끝나기 전에는 write를 할 수 없음.

- 장점
    - 간단하게 사용 가능
        - 한 프로세스는 읽기만, 다른 프로세스는 쓰기만 하는 단순한 데이터 흐름에 적합.
- 단점
    - Full-Duplex(전이중) 통신 방식으로 활용하고 싶은 경우, PIPE를 두 개 만들어야 함.
        - 이 과정에서 구현이 복잡해질 수 있음.
    - 버퍼가 상대적으로 작은 경우, overflow 발생 가능성 높음.
        - read 처리를 빠르게 해줘야 함.
    - 부모, 자식 관계의 프로세스 사이에서 가능한 통신 방식

<br />

### 2️⃣ Named PIPE(FIFO)

- 통신할 프로세스를 명확히 알 수 있는 경우 사용
- 일반적인 PIPE는 부모, 자식 관계에서 사용하는데 반해, Named PIPE는 전혀 무관한 프로세스 간의 통신에 사용됨.
    - 프로세스 간의 통신을 위해 이름있는 파일을 매개체로 사용하기 때문 !
- 장점
    - 통신 선로가 파일로 존재 → 하나의 파일은 읽기 전용/ 다른 파일은 쓰기 전용으로 열어서 read/ write문제 해결은 가능.
        - 호스트 영역의 서버-클라이언트 간의 전이중 통신을 위해서는 PIPE와 두 개의 FIFO 파일이 필요하게 됨.
- 단점
    - 여전히 읽기/ 쓰기가 동시에 이루어지지 않음.
        - 단방향 통신 → read-only or write-only

<br />

### 3️⃣ Message Queue

- Queue: FIFO(First In First Out)의 구조를 가짐.
    - 입출력 방식은 Named PIPE와 동일
- Named PIPE와의 차이점
    - Named PIPE → 데이터 흐름
    - Queue → 메모리 공간 → 메모리를 사용한 PIPE
        - 다수의 프로세스 간의 메시지 전달 가능
        - 메시지 접근을 위한 키(key) 필요
- 장점
    - Message Queue에 사용할 데이터의 번호를 붙임
        - 여러 개의 프로세스가 동시에 데이터를 쉽게 다룰 수 있음.

<br />

### 4️⃣ Shared Memory (공유 메모리)

- 공유 메모리가 데이터 자체를 공유하도록 지원
- 프로세스 간 메모리 영역을 공유하여 사용할 수 있게 함.
    - 프로세스가 공유 메모리 할당을 커널에 요청 시, 커널은 프로세스에 메모리 공간을 할당해줌.
    - 이후 어떤 프로세스든 해당 메모리 영역에 접근 가능
- 프로세스 간 읽기/ 쓰기를 모두 필요로 할 때 사용
- 대량의 정보를 다수의 프로세스에 배포 가능
- 공유 메모리는 중간 매개체 없이 `곧바로 메모리에 접근`할 수 있기 때문에, `모든 IPC 중 가장 빠르게 작동 가능`함.

<br />

### 5️⃣ Memory Map

- 메모리를 공유한다는 측면에서 Shared Memory(공유 메모리)와 비슷함.
- 공유 메모리와 차이점
    - Memory Map → 열린 파일을 메모리에 맵핑시켜서 공유함.
        - 공유 매개체: 파일 + 메모리
        - 파일은 시스템의 전역적인 자원이기 때문에 서로 다른 프로세스끼리 데이터를 공유하는데는 문제 없음.
- 주로 파일로 대용량 데이터 공유 시 사용

<br />

### 6️⃣ Socket

- 프로세스와 시스템의 기초적인 부분이며, 프로세스 간의 통신을 가능하게 함.
- 네트워크 소켓 통신을 통해 데이터를 공유함.
- 클라이언트-서버가 소켓을 통해 통신하는 구조
    - 원격에서 프로세스 간 데이터 공유 시 사용
- 장점
    - 전이중 통신 가능
    - 클라이언트/ 서버 환경 구축에 용이
- 주로 중대형 애플리케이션에서 사용

<br />

### 7️⃣ Semaphore (세마포어)

- 다른 IPC 설비들이 프로세스 간 메시지 전송을 목적으로 하는 반면, Semaphore는 `프로세스 간 데이터 동기화와 보호`에 목적을 둠.
- 프로세스 간 메시지 전송/ 공유 메모리를 통해 특정 데이터를 공유하는 경우, `공유된 자원`에 `하나의 프로세스만 접근 가능하게 할 때` 사용